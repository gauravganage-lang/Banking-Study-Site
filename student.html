<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="dashboard-body">
    <header class="header">
        <h1>Welcome, <span id="userName"></span>!</h1>
        <button onclick="logout()" class="btn secondary">Logout</button>
    </header>

    <main class="container">
        <h2>ðŸ“– Your Study Materials</h2>
        <div id="materials-list" class="materials-grid">
            </div>
    </main>

    <script>
        // Check if the user is logged in as a student
        const role = localStorage.getItem('role');
        if (role !== 'student') {
            window.location.href = 'index.html';
        }
        document.getElementById('userName').textContent = localStorage.getItem('user');

        function logout() {
            localStorage.clear();
            window.location.href = 'index.html';
        }

        async function loadMaterials() {
            try {
                // Fetch data from the local JSON file
                const response = await fetch('materials.json');
                const materials = await response.json();
                const container = document.getElementById('materials-list');
                container.innerHTML = ''; // Clear previous content

                materials.forEach(material => {
                    // Only show materials that are "active" for the student
                    if (material.status === 'Active') {
                        const card = document.createElement('div');
                        card.className = 'material-card';
                        card.innerHTML = `
                            <h3>${material.title}</h3>
                            <p><strong>Topic:</strong> ${material.topic}</p>
                            <p class="description">${material.description}</p>
                            <a href="${material.link}" target="_blank" class="btn small">View Material</a>
                        `;
                        container.appendChild(card);
                    }
                });
            } catch (error) {
                console.error('Error loading materials:', error);
                document.getElementById('materials-list').innerHTML = '<p class="error-message">Could not load materials.</p>';
            }
        }

        loadMaterials();
    </script>
</body>
</html>
